<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Localizing Lorentz</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
<link href="/2010/06/localizing-lorentz" rel="canonical" />
  <!-- Feed -->

  <link href="/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="/theme/css/code_blocks/github.css" rel="stylesheet">


  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->



    <meta name="description" content="It's been a while, but I'll take a stab at what we did to localize Lorentz, i.e., how did we add strings to a stable branch? The...">

    <meta name="author" content="Axel Hecht">

    <meta name="tags" content="L10n">
    <meta name="tags" content="Mozilla">




<!-- Open Graph -->
<meta property="og:site_name" content="Axel Hecht"/>
<meta property="og:title" content="Localizing Lorentz"/>
<meta property="og:description" content="It's been a while, but I'll take a stab at what we did to localize Lorentz, i.e., how did we add strings to a stable branch? The..."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="/2010/06/localizing-lorentz"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2010-06-24 07:20:00+00:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="/author/axel-hecht.html">
<meta property="article:section" content="L10n"/>
<meta property="article:tag" content="L10n"/>
<meta property="article:tag" content="Mozilla"/>
<meta property="og:image" content="/theme/images/post-bg.jpg">

<!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@axelhecht">
    <meta name="twitter:title" content="Localizing Lorentz">
    <meta name="twitter:url" content="/2010/06/localizing-lorentz">

        <meta name="twitter:image:src" content="/theme/images/post-bg.jpg">

      <meta name="twitter:description" content="It's been a while, but I'll take a stab at what we did to localize Lorentz, i.e., how did we add strings to a stable branch? The...">

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Localizing Lorentz",
  "headline": "Localizing Lorentz",
  "datePublished": "2010-06-24 07:20:00+00:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Axel Hecht",
    "url": "/author/axel-hecht.html"
  },
  "image": "/theme/images/post-bg.jpg",
  "url": "/2010/06/localizing-lorentz",
  "description": "It's been a while, but I'll take a stab at what we did to localize Lorentz, i.e., how did we add strings to a stable branch? The..."
}
</script>
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>

                  <li class="nav-l10n active" role="presentation"><a href="/category/l10n.html">L10n</a></li>
                  <li role="presentation"><a href="/category/misc.html">Misc</a></li>
                  <li role="presentation"><a href="/category/mozilla.html">Mozilla</a></li>
                  <li role="presentation"><a href="/category/rdf.html">RDF</a></li>
                  <li role="presentation"><a href="/category/tech.html">Tech</a></li>

    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" >
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="/" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Localizing Lorentz</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="/author/axel-hecht.html">Axel Hecht</a>
            | <time datetime="Thu 24 June 2010">Thu 24 June 2010</time>
        </span>
        <!-- TODO : Modified check -->
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <p>It's been a while, but I'll take a stab at what we did to localize Lorentz, i.e., how did we add strings to a stable branch?</p>
<p>The underlying principle was add-on compatibility, that is, language packs that are out there and compatible with <tt class="docutils literal">3.6.*</tt> needed to continue to work. The second principle was that while we didn't want to break existing language packs, we did want to offer our localizers to work on the new strings to get the best possible user experience. So we're adding strings without adding strings.</p>
<p>Given that we had a project branch for Lorentz, the work on the Lorentz branch itself was rather simple, just code like you'd always do. We didn't do any special branch mechanics there, and built the Lorentz branch against the regular l10n repositories on 1.9.2. The only caveat here was to not remove strings, only additions were OK. As soon as that work got stable in terms of the strings used, we landed a patch that, for each new string, <a class="reference external" href="http://hg.mozilla.org/projects/firefox-lorentz/rev/30ca0b454785">adds a hard-coded fallback to the code</a>. That way, you pick up the localized string without failing if it doesn't exist. So much for the work on the project branch.</p>
<p>On the stable branch, things are a bit more tricky. Of course we needed to be able to continue shipping security updates from the stable branch, that is, we didn't want to turn builds red for strings that aren't really missing. Yet we wanted to signal that the strings are there and to be localized. Up until then, we only had two stages of strings, missing or not. The latter is what we use for handlers in region.properties, for example. We needed a third stage, &quot;report on this string, but don't fail&quot;. So I added a third stage to the logic around filter.py in compare-locales. This logic is now used in <a class="reference external" href="http://hg.mozilla.org/releases/mozilla-1.9.2/file/ad815619652f/browser/locales/filter.py#l27">filter.py on the 1.9.2 branch</a>, but not on central. Another necessary addition was to support filter.py for each module, so that we only had to hack around the toolkit strings once, and ont for all apps on 1.9.2. So there's now a <a class="reference external" href="http://hg.mozilla.org/releases/mozilla-1.9.2/file/ad815619652f/toolkit/locales/filter.py#l8">filter.py file for toolkit on 1.9.2</a>, making sure we only report on the lorentz strings in toolkit.</p>
<p>Once that logic was in place, we added a &quot;strings-only&quot; patch to 1.9.2, which had the benefit of exposing the en-US strings in the regular repository that our l10n community is working on.</p>
<p>The outcome today is that out of the 74 languages we ship, only 25 still rely on the en-US fallback strings.</p>
<p>In bullet points, that'd be:</p>
<ul class="simple">
<li>Do not remove strings, so that newer language packs are compatible with older releases.</li>
<li>Add strings with en-US fallbacks, so that they can be localized, but don't error when missing.</li>
<li>Make filter.py for the module (browser/mail/toolkit) &quot;report&quot; on the new strings, so that localizers see the strings without hiding real errors from non-fatal ones.</li>
<li>Land strings early on the stable branch to get them exposed to l10n (with filter.py, see above).</li>
</ul>

            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Localizing Lorentz&amp;url=/2010/06/localizing-lorentz" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=/2010/06/localizing-lorentz" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=/2010/06/localizing-lorentz" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="/tag/l10n.html">L10n</a><a href="/tag/mozilla.html">Mozilla</a>                </aside>

                <div class="clear"></div>


                </section>


                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">


          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script type="text/javascript" src="/theme/js/script.js"></script>

</body>
</html>